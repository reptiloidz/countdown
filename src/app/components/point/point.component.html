<div>
	<h1>{{ point?.title }}<span
			*ngIf="loading"
			class="loader rotating"
		></span></h1>

	<app-calendar
		*ngIf="this.dates?.length"
		(dateSelected)="dateSelected($event)"
		[iterations]="point?.dates"
		class="calendar"
	></app-calendar>

	<ul
		#iterationsList
		*ngIf="this.dates?.length && (this.dates?.length != 1)"
		class="tabs"
	>
		<li
			*ngFor="let date of this.dates | sort; let i = index"
			class="tabs__item"
			[ngClass]="{
				'tabs__item--active': i == currentIterationIndex
			}"
		>
			<button
				class="link tabs__btn"
				(click)="switchIteration(i)"
				type="button"
			>{{ i + 1 }}
				<ng-container *ngIf="date.reason === 'frequency'">*</ng-container>
			</button>
			<input
				*ngIf="hasAccess"
				type="checkbox"
				[name]="i"
				(change)="checkIteration()"
			>
			<button
				*ngIf="hasAccess"
				class="link"
				(click)="removeIteration(i)"
				type="button"
			>x</button>
		</li>
	</ul>

	<div *ngIf="hasAccess && !loading && !dateLoading && isDatesLengthPlural">
		<button
			type="button"
			(click)="checkAllIterations()"
		>Выбрать все</button>
		<ng-container *ngIf="iterationsChecked.length">
			<button
				type="button"
				(click)="uncheckAllIterations()"
			>Снять выбор</button>
			<button
				type="button"
				(click)="removeCheckedIterations()"
			>Удалить выбранные итерации</button>
		</ng-container>
	</div>

	<small *ngIf="point?.greenwich">Время по Гринвичу</small>
	<small *ngIf="point?.repeatable">&nbsp;Повторяемое</small>
	<small *ngIf="point?.public">&nbsp;Публичное</small>
	<h2
		*ngIf="point?.title"
		class="description"
	>{{ remainTextValue }}</h2>
	<p
		*ngIf="!dateLoading; else dateLoader"
		class="timer"
		[attr.title]="iterationDate || null"
	>{{ dateTimer }} {{ timer }}</p>
	<ng-template #dateLoader>
		<h2>
			<div class="loader rotating"></div>
		</h2>
	</ng-template>
</div>
<br>
<p>{{ point?.description }}</p>
