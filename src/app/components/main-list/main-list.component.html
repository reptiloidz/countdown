<ng-container *ngIf="!loading; else loader">
	<app-calendar
		(calendarRegenerated)="calendarRegenerated()"
		[points]="points"
		class="calendar"
	>
		<ng-template
			#contentTemplate
			let-date="date"
			let-mode="mode"
		>
			<app-drop
				*ngIf="date.points.length"
				[opened]="+date.date === (this.dropOpenedDate && +this.dropOpenedDate)"
			>
				<ng-template #buttonTemplate>
					<button
						type="button"
						class="calendar__btn-nav"
						(click)="openDate({ date, activeMode: mode })"
					>&#709;</button>
				</ng-template>
				<ng-template #bodyTemplate>
					<ul class="calendar__date-ul">
						<li
							*ngFor="let point of date.points"
							class="calendar__date-li"
						>
							<a routerLink="/point/{{ point.id }}">{{ point.title }}</a>
						</li>
					</ul>
				</ng-template>
			</app-drop>
		</ng-template>
	</app-calendar>
	<ul
		#pointsList
		*ngIf="points.length; else empty"
		class="list"
	>
		<li
			app-main-item
			[attr.data-id]="point.id"
			class="item"
			*ngFor="let point of points; let i = index"
			[point]="point"
			(pointCheck)="checkPoint()"
		></li>
	</ul>
</ng-container>

<ng-template #empty>
	<h2>
		Нет событий для отображения
	</h2>
</ng-template>


<ng-template #loader>
	<h2
		*ngIf="loading"
		class="loader rotating"
	></h2>
</ng-template>
